CREATE enrollment(
CNAME STRING,
SNAME STRING
),

CREATE courses(
CNAME STRING
);

ON SOURCE[enrollment], VIEW courses:

INSERT {CNAME, 'Bob'} INTO enrollment
WHEN NOT {CNAME, _} IN enrollment
THEN INSERT {CNAME} INTO courses,

INSERT {CNAME, SNAME} INTO enrollment
WHEN NOT {CNAME, _} IN enrollment
THEN INSERT {CNAME} INTO courses,

FORALL SNAME SUCH THAT {CNAME, SNAME} IN enrollment DO [DELETE {CNAME, SNAME} FROM enrollment]
WHEN {CNAME, _} IN enrollment
THEN DELETE {CNAME} FROM courses.